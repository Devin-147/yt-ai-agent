<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <title>YT AI Agent</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-900 text-white p-8">
  <div x-data="app()" class="max-w-7xl mx-auto">
    <header class="text-center mb-8">
      <h1 class="text-4xl font-bold text-purple-400">YouTube AI Agent</h1>
      <p class="text-gray-300">Scrape, Analyze, Rewrite, Dominate</p>
    </header>

    <!-- Overview Cards (Like Your Screenshot) -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
      <div class="bg-purple-800 p-4 rounded-lg">
        <h3 class="text-sm text-gray-300">Total Videos Analyzed</h3>
        <p class="text-2xl font-bold">7,342</p>
        <span class="text-green-400 text-sm">+12% last month</span>
      </div>
      <div class="bg-purple-800 p-4 rounded-lg">
        <h3 class="text-sm text-gray-300">Avg Engagement Rate</h3>
        <p class="text-2xl font-bold">74.5%</p>
        <span class="text-green-400 text-sm">+4.8% last week</span>
      </div>
      <div class="bg-purple-800 p-4 rounded-lg">
        <h3 class="text-sm text-gray-300">Competitors Monitored</h3>
        <p class="text-2xl font-bold">24</p>
        <span class="text-gray-400 text-sm">Active channels</span>
      </div>
      <div class="bg-purple-800 p-4 rounded-lg">
        <h3 class="text-sm text-gray-300">Ideas Generated</h3>
        <p class="text-2xl font-bold">156</p>
        <span class="text-gray-400 text-sm">This month</span>
      </div>
    </div>

    <!-- Input Section -->
    <div class="bg-gray-800 p-6 rounded-lg mb-8">
      <h2 class="text-xl mb-4">Paste YouTube URLs (1-10)</h2>
      <textarea x-model="urls" placeholder="https://youtube.com/watch?v=..." class="w-full h-32 p-3 bg-gray-700 rounded text-white" rows="4"></textarea>
      <button @click="generate()" class="mt-4 bg-purple-600 px-6 py-2 rounded hover:bg-purple-500">Generate Script & Analysis</button>
    </div>

    <!-- Output / Dashboard -->
    <div x-show="loading" class="text-center py-8">Analyzing videos...</div>
    <div x-show="error" class="bg-red-800 p-4 rounded">Error: <span x-text="error"></span></div>
    <div x-show="script" class="bg-gray-800 p-6 rounded-lg mb-8">
      <h3 class="text-xl mb-4">Rewritten Script</h3>
      <pre x-text="script" class="whitespace-pre-wrap text-sm"></pre>
      <p class="mt-4 text-gray-400" x-text="'Processed ' + inputVideos + ' videos.'"></p>
    </div>

    <!-- Trends Chart (Placeholder) -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
      <div class="bg-gray-800 p-6 rounded-lg">
        <h3 class="text-lg mb-4">Performance Trends</h3>
        <canvas id="trendsChart" width="400" height="200"></canvas>
      </div>
      <div class="bg-gray-800 p-6 rounded-lg">
        <h3 class="text-lg mb-4">Content Categories</h3>
        <canvas id="pieChart" width="400" height="200"></canvas>
      </div>
    </div>
  </div>

  <script>
    function app() {
      return {
        urls: '',
        script: '',
        error: '',
        loading: false,
        inputVideos: 0,
        async generate() {
          this.loading = true;
          this.error = '';
          this.script = '';
          try {
            const res = await fetch('/api', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ urls: this.urls.split('\n').filter(Boolean) })
            });
            const data = await res.json();
            if (data.success) {
              this.script = data.finalScript;
              this.inputVideos = data.inputVideos;
            } else {
              this.error = data.error;
            }
          } catch (e) {
            this.error = e.message;
          }
          this.loading = false;
        }
      }
    }

    // Init Charts (Demo Data)
    new Chart(document.getElementById('trendsChart'), {
      type: 'line',
      data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
        datasets: [{ label: 'Views', data: [300, 400, 500, 600, 700, 800], borderColor: '#a855f7' }]
      },
      options: { responsive: true, scales: { y: { beginAtZero: true } } }
    });
    new Chart(document.getElementById('pieChart'), {
      type: 'pie',
      data: {
        labels: ['Product Reviews', 'Tutorials', 'Other'],
        datasets: [{ data: [50, 30, 20], backgroundColor: ['#a855f7', '#7c3aed', '#6d28d9'] }]
      },
      options: { responsive: true }
    });
  </script>
</body>
</html>
