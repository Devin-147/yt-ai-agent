<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YT AI Agent</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white min-h-screen flex items-center justify-center p-8">
  <div class="w-full max-w-2xl space-y-8">
    <h1 class="text-6xl font-black text-center bg-gradient-to-r from-purple-400 to-pink-500 bg-clip-text text-transparent">
      YT AI Agent
    </h1>
    <textarea id="urls" rows="10" class="w-full p-6 text-lg bg-gray-900 rounded-2xl focus:outline-none focus:ring-4 focus:ring-purple-600"
      placeholder="Paste YouTube URLs — one per line"></textarea>
    <button onclick="run()" class="w-full py-6 text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl hover:from-purple-700 hover:to-pink-700">
      Generate Script
    </button>
    <pre id="result" class="hidden mt-8 p-8 bg-gray-900 rounded-2xl text-lg leading-relaxed overflow-x-auto"></pre>
  </div>

  <script>
    async function run() {
      const urls = document.getElementById('urls').value.trim().split('\n').filter(Boolean);
      const result = document.getElementById('result');
      result.classList.add('hidden');
      result.textContent = 'Working…';

      if (urls.length === 0) {
        result.textContent = 'Please paste at least one URL';
        result.classList.remove('hidden');
        return;
      }

      try {
        const res = await fetch("/api", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ urls })
        });
        const data = await res.json();

        if (data.success) {
          result.textContent = data.finalScript;
        } else {
          result.textContent = `Error: ${data.error}`;
        }
      } catch (e) {
        result.textContent = `Network error: ${e.message}`;
      }
      result.classList.remove('hidden');
    }
  </script>
</body>
</html>
